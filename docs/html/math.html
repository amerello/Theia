
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    

    <title>Math &mdash; Theia Documentation</title>

<meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;"/>

<!-- Google Analytics Code -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-46196711-1', 'ucsb.edu');
  ga('send', 'pageview');

</script>


    
    <link rel="stylesheet" href="_static/rtd.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML">
  MathJax.Hub.Config({
    "HTML-CSS": {
      availableFonts: ["TeX"]
    }
  });
</script>
    <script type="text/javascript" src="_static/searchtools.js"></script>
    <link rel="top" title="Theia Documentation" href="index.html" />
    <link rel="up" title="Documentation" href="documentation.html" />
    <link rel="next" title="Structure from Motion (SfM)" href="sfm.html" />
    <link rel="prev" title="Pose and Resectioning" href="pose.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="sfm.html" title="Structure from Motion (SfM)"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="pose.html" title="Pose and Resectioning"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">Theia Documentation</a> &raquo;</li>
          <li><a href="documentation.html" accesskey="U">Documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="math">
<span id="documentation-math"></span><h1>Math<a class="headerlink" href="#math" title="Permalink to this headline">¶</a></h1>
<p>At the root of computer vision is a heavy amount of math and probability. Theia contains various math functions implemented with a generic interface for ease of use.</p>
<p>You can include the Math module with the following line:</p>
<div class="highlight-c++"><div class="highlight"><pre><span class="cp">#include &lt;theia/math.h&gt;</span>
</pre></div>
</div>
<div class="section" id="closed-form-polynomial-solver">
<span id="section-closed-form-poly"></span><h2>Closed Form Polynomial Solver<a class="headerlink" href="#closed-form-polynomial-solver" title="Permalink to this headline">¶</a></h2>
<p>Many problems in vision rely on solving a polynomial quickly. For small degrees
(n &lt;= 4) this can be done in closed form, making them exceptionally fast. We
have implemented solvers for these cases.</p>
<dl class="function">
<dt id="SolveQuadraticReals__double.double.double.doubleP">
int <tt class="descname">SolveQuadraticReals</tt><big>(</big>double <em>a</em>, double <em>b</em>, double <em>c</em>, double* <em>roots</em><big>)</big><a class="headerlink" href="#SolveQuadraticReals__double.double.double.doubleP" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="SolveQuadratic__double.double.double.std::complex:double:P">
int <tt class="descname">SolveQuadratic</tt><big>(</big>double <em>a</em>, double <em>b</em>, double <em>c</em>, std::complex&lt;double&gt;* <em>roots</em><big>)</big><a class="headerlink" href="#SolveQuadratic__double.double.double.std::complex:double:P" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides solutions to the equation <span class="math">\(a*x^2 + b*x + c = 0\)</span></p>
</dd></dl>

<dl class="function">
<dt id="SolveCubicReals__double.double.double.double.doubleP">
int <tt class="descname">SolveCubicReals</tt><big>(</big>double <em>a</em>, double <em>b</em>, double <em>c</em>, double <em>d</em>, double* <em>roots</em><big>)</big><a class="headerlink" href="#SolveCubicReals__double.double.double.double.doubleP" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="SolveCubic__double.double.double.double.std::complex:double:P">
int <tt class="descname">SolveCubic</tt><big>(</big>double <em>a</em>, double <em>b</em>, double <em>c</em>, double <em>d</em>, std::complex&lt;double&gt;* <em>roots</em><big>)</big><a class="headerlink" href="#SolveCubic__double.double.double.double.std::complex:double:P" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides solutions to the equation <span class="math">\(a*x^3 + b*x^2 + c*x + d = 0\)</span> using <a class="reference external" href="http://en.wikipedia.org/wiki/Cubic_function#Cardano.27s_method">Cardano&#8217;s</a> method.</p>
</dd></dl>

<dl class="function">
<dt id="SolveQuarticReals__double.double.double.double.double.doubleP">
int <tt class="descname">SolveQuarticReals</tt><big>(</big>double <em>a</em>, double <em>b</em>, double <em>c</em>, double <em>d</em>, double <em>e</em>, double* <em>roots</em><big>)</big><a class="headerlink" href="#SolveQuarticReals__double.double.double.double.double.doubleP" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="SolveQuartic__double.double.double.double.double.std::complex:double:P">
int <tt class="descname">SolveQuartic</tt><big>(</big>double <em>a</em>, double <em>b</em>, double <em>c</em>, double <em>d</em>, double <em>e</em>, std::complex&lt;double&gt;* <em>roots</em><big>)</big><a class="headerlink" href="#SolveQuartic__double.double.double.double.double.std::complex:double:P" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides solutions to the equation <span class="math">\(a*x^4 + b*x^3 + c*x^2 + d*x + e = 0\)</span> using <a class="reference external" href="http://en.wikipedia.org/wiki/Quartic_function#Ferrari.27s_solution">Ferrari&#8217;s method</a> to reduce to problem to a depressed cubic.</p>
</dd></dl>

</div>
<div class="section" id="generic-polynomial-solver">
<span id="section-generic-poly"></span><h2>Generic Polynomial Solver<a class="headerlink" href="#generic-polynomial-solver" title="Permalink to this headline">¶</a></h2>
<p>For polynomials of degree &gt; 4 there are no easy closed-form solutions, making the problem of finding roots much more difficult. However, we have implemented a function that will solve for all roots of a polynomial by constructing a companion matrix and solving with an eigenvalue decomposition.</p>
<dl class="function">
<dt id="GetPolynomialRoots__Eigen::VectorXdCR">
std::vector&lt;std::complex&lt;double&gt;&gt; <tt class="descname">GetPolynomialRoots</tt><big>(</big>const Eigen::VectorXd&amp; <em>coeffs</em><big>)</big><a class="headerlink" href="#GetPolynomialRoots__Eigen::VectorXdCR" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="GetRealPolynomialRoots__Eigen::VectorXdCR">
std::vector&lt;double&gt; <tt class="descname">GetRealPolynomialRoots</tt><big>(</big>const Eigen::VectorXd&amp; <em>coeffs</em><big>)</big><a class="headerlink" href="#GetRealPolynomialRoots__Eigen::VectorXdCR" title="Permalink to this definition">¶</a></dt>
<dd><p>These methods take in polynomial coefficients such that the highest degree
coefficient is the first element, and the lowest degree coefficient
(correspondening to degree 0) is the last element. Real or complex roots are
returned depending on the method called.</p>
</dd></dl>

</div>
<div class="section" id="guass-jordan">
<span id="section-gauss-jordan"></span><h2>Guass-Jordan<a class="headerlink" href="#guass-jordan" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="GaussJordan__Eigen::MatrixBase:Derived:P.i">
void <tt class="descname">GaussJordan</tt><big>(</big>Eigen::MatrixBase&lt;Derived&gt;* <em>input</em>, int <em>max_rows</em><em>=99999</em><big>)</big><a class="headerlink" href="#GaussJordan__Eigen::MatrixBase:Derived:P.i" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform traditional Gauss-Jordan elimination on an Eigen3 matrix. If
<tt class="docutils literal"><span class="pre">max_rows</span></tt> is specified, it will on perform Gauss-Jordan on the first
<tt class="docutils literal"><span class="pre">max_rows</span></tt> number of rows. This is useful for problems where your system is
extremely overdetermined and you do not need all rows to be solved.</p>
</dd></dl>

</div>
<div class="section" id="sequential-probability-ratio-test">
<span id="section-sprt"></span><h2>Sequential Probability Ratio Test<a class="headerlink" href="#sequential-probability-ratio-test" title="Permalink to this headline">¶</a></h2>
<p>Modified version of Wald&#8217;s <a class="reference external" href="http://en.wikipedia.org/wiki/Sequential_probability_ratio_test">SPRT</a> as <a class="reference internal" href="bibliography.html#matas">[Matas]</a> et. al. implement it in &#8220;Randomized
RANSAC with Sequential Probability Ratio Test&#8221;</p>
<dl class="function">
<dt id="CalculateSPRTDecisionThreshold__double.double.double.i">
double <tt class="descname">CalculateSPRTDecisionThreshold</tt><big>(</big>double <em>sigma</em>, double <em>epsilon</em>, double <em>time_compute_model_ratio</em><em>=200.0</em>, int <em>num_models_verified</em><em>=1</em><big>)</big><a class="headerlink" href="#CalculateSPRTDecisionThreshold__double.double.double.i" title="Permalink to this definition">¶</a></dt>
<dd><p><tt class="docutils literal"><span class="pre">sigma</span></tt>: Probability of rejecting a good model (Bernoulli parameter).</p>
<p><tt class="docutils literal"><span class="pre">epsilon</span></tt>: Inlier ratio.</p>
<p><tt class="docutils literal"><span class="pre">time_compute_model_ratio</span></tt>: Computing the model parameters from a sample takes the same time as verification of time_compute_model_ratio data points. Matas et. al. use 200.</p>
<p><tt class="docutils literal"><span class="pre">num_model_verified</span></tt>: Number of models that are verified per sample.</p>
<p><tt class="docutils literal"><span class="pre">Returns</span></tt>:  The SPRT decision threshold based on the input parameters.</p>
</dd></dl>

<dl class="function">
<dt id="SequentialProbabilityRatioTest__std::vector:double:CR.double.double.double.double.iP.doubleP">
bool <tt class="descname">SequentialProbabilityRatioTest</tt><big>(</big>const std::vector&lt;double&gt;&amp; <em>residuals</em>, double <em>error_thresh</em>, double <em>sigma</em>, double <em>epsilon</em>, double <em>decision_threshold</em>, int* <em>num_tested_points</em>, double* <em>observed_inlier_ratio</em><big>)</big><a class="headerlink" href="#SequentialProbabilityRatioTest__std::vector:double:CR.double.double.double.double.iP.doubleP" title="Permalink to this definition">¶</a></dt>
<dd><p>Modified version of Wald&#8217;s SPRT as <a class="reference internal" href="bibliography.html#matas">[Matas]</a> et. al. implement it in &#8220;Randomized
RANSAC with Sequential Probability Ratio Test&#8221;. See the paper for more
details.</p>
<p><tt class="docutils literal"><span class="pre">residuals</span></tt>: Error residuals to use for SPRT analysis.</p>
<p><tt class="docutils literal"><span class="pre">error_thresh</span></tt>: Error threshold for determining when Datum fits the model.</p>
<p><tt class="docutils literal"><span class="pre">sigma</span></tt>: Probability of rejecting a good model.</p>
<p><tt class="docutils literal"><span class="pre">epsilon</span></tt>: Inlier ratio.</p>
<p><tt class="docutils literal"><span class="pre">decision_threshold</span></tt>: The decision threshold at which to terminate.</p>
<p><tt class="docutils literal"><span class="pre">observed_inlier_ratio</span></tt>: Output parameter of inlier ratio tested.</p>
</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/theia_logo.png" alt="Logo"/>
            </a></p>

<h3><a href="index.html">Theia</a></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="building.html">Building Theia Library</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="documentation.html">Documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="image.html">Image</a></li>
<li class="toctree-l2"><a class="reference internal" href="features.html">Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="ransac.html">Ransac</a></li>
<li class="toctree-l2"><a class="reference internal" href="pose.html">Pose and Resectioning</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">Math</a></li>
<li class="toctree-l2"><a class="reference internal" href="sfm.html">Structure from Motion (SfM)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tutorials.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributions.html">Contributing to Theia</a></li>
<li class="toctree-l1"><a class="reference internal" href="acknowledgements.html">Acknowledgements</a></li>
<li class="toctree-l1"><a class="reference internal" href="bibliography.html">Bibliography</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">License</a></li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="pose.html"
                        title="previous chapter">Pose and Resectioning</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="sfm.html"
                        title="next chapter">Structure from Motion (SfM)</a></p>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="sfm.html" title="Structure from Motion (SfM)"
             >next</a> |</li>
        <li class="right" >
          <a href="pose.html" title="Pose and Resectioning"
             >previous</a> |</li>
        <li><a href="index.html">Theia Documentation</a> &raquo;</li>
          <li><a href="documentation.html" >Documentation</a> &raquo;</li> 
      </ul>
    </div>
<div class="footer">
    &copy; Copyright 2014, Chris Sweeney.
</div>


  </body>
</html>